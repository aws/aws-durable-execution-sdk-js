
> @aws/durable-execution-sdk-js-examples@0.1.0 test
> npm run unit-test --testPathPattern=hello-world --verbose

npm verbose cli /Users/parpooya/.nvm/versions/node/v20.19.5/bin/node /Users/parpooya/.nvm/versions/node/v20.19.5/bin/npm
npm info using npm@10.8.2
npm info using node@v20.19.5
npm info config found workspace root at /Users/parpooya/workplace/aws-durable-execution-sdk-js-branch
npm verbose title npm run unit-test
npm verbose argv "run" "unit-test" "--testPathPattern" "hello-world" "--loglevel" "verbose"
npm verbose logfile logs-max:10 dir:/Users/parpooya/.npm/_logs/2025-11-19T20_21_11_009Z-
npm verbose logfile /Users/parpooya/.npm/_logs/2025-11-19T20_21_11_009Z-debug-0.log

> @aws/durable-execution-sdk-js-examples@0.1.0 unit-test
> jest --collectCoverage

PASS src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts
  ● Console

    console.log
      Testing checkpoint size limit boundary with 200 iterations in parallel

      at log (src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.ts:18:13)

    console.log
      
      === CHECKPOINT SIZE BOUNDARY TEST RESULTS ===

      at Object.<anonymous> (src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:29:15)

    console.log
      Checkpoint size limit: 262144 bytes (256KB)

      at Object.<anonymous> (src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:30:15)

    console.log
      Total iterations: 200

      at Object.<anonymous> (src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:33:15)

    console.log
      Under limit iterations: 10

      at Object.<anonymous> (src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:34:15)

    console.log
      Over limit iterations: 190

      at Object.<anonymous> (src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:35:15)

    console.log
      Payload size range: 262134 to 262333 bytes

      at Object.<anonymous> (src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:36:15)

    console.log
      
      === SERIALIZATION OVERHEAD ANALYSIS ===

      at Object.<anonymous> (src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:41:15)

    console.log
      Payload: 262134 bytes, Serialized: 262136 bytes, Overhead: 2 bytes

      at src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:43:17
          at Array.forEach (<anonymous>)

    console.log
      Payload: 262135 bytes, Serialized: 262137 bytes, Overhead: 2 bytes

      at src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:43:17
          at Array.forEach (<anonymous>)

    console.log
      Payload: 262136 bytes, Serialized: 262138 bytes, Overhead: 2 bytes

      at src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:43:17
          at Array.forEach (<anonymous>)

    console.log
      Payload: 262137 bytes, Serialized: 262139 bytes, Overhead: 2 bytes

      at src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:43:17
          at Array.forEach (<anonymous>)

    console.log
      Payload: 262138 bytes, Serialized: 262140 bytes, Overhead: 2 bytes

      at src/examples/run-in-child-context/checkpoint-size-limit/run-in-child-context-checkpoint-size-limit.test.ts:43:17
          at Array.forEach (<anonymous>)

PASS src/examples/step/steps-with-retry/steps-with-retry.test.ts
  ● Console

    console.log
      Poll #1

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.log
      Success - Item was found:  { id: { S: 'test-item' }, data: { S: 'test-data' } }

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:82:13)

    console.log
      Poll #1

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.log
      Poll #2

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.log
      Success - Item was found:  { id: { S: 'test-item' }, data: { S: 'found-item' } }

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:82:13)

    console.log
      Poll #1

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.warn
      Step Attempt #1. Error: Temporary failure
          at Object.<anonymous> (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples/src/examples/step/steps-with-retry/steps-with-retry.test.ts:83:30)
          at Promise.finally.completed (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:497:12) . Retry? true.

      17 |   retryStrategy: (error: Error, attemptsMade: number) => {
      18 |     const shouldRetry = attemptsMade <= 5;
    > 19 |     console.warn(
         |             ^
      20 |       `Step Attempt #${attemptsMade}.`,
      21 |       error,
      22 |       `. Retry? ${shouldRetry}. `,

      at Object.warn [as retryStrategy] (src/examples/step/steps-with-retry/steps-with-retry.ts:19:13)
      at retryStrategy (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:463:31)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24
      at DurablePromise.awaitedChangeCallback [as _executor] (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:307:14)

    console.log
      Poll #1

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.log
      Success - Item was found:  { id: { S: 'test-item' }, data: { S: 'retry-success' } }

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:82:13)

    console.log
      Poll #1

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.warn
      Step Attempt #1. Error: Persistent failure
          at Object.<anonymous> (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples/src/examples/step/steps-with-retry/steps-with-retry.test.ts:107:32)
          at Promise.finally.completed (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:497:12) . Retry? true.

      17 |   retryStrategy: (error: Error, attemptsMade: number) => {
      18 |     const shouldRetry = attemptsMade <= 5;
    > 19 |     console.warn(
         |             ^
      20 |       `Step Attempt #${attemptsMade}.`,
      21 |       error,
      22 |       `. Retry? ${shouldRetry}. `,

      at Object.warn [as retryStrategy] (src/examples/step/steps-with-retry/steps-with-retry.ts:19:13)
      at retryStrategy (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:463:31)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24
      at DurablePromise.awaitedChangeCallback [as _executor] (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:307:14)

    console.log
      Poll #1

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.warn
      Step Attempt #2. Error: Persistent failure
          at Object.<anonymous> (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples/src/examples/step/steps-with-retry/steps-with-retry.test.ts:107:32)
          at Promise.finally.completed (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:497:12) . Retry? true.

      17 |   retryStrategy: (error: Error, attemptsMade: number) => {
      18 |     const shouldRetry = attemptsMade <= 5;
    > 19 |     console.warn(
         |             ^
      20 |       `Step Attempt #${attemptsMade}.`,
      21 |       error,
      22 |       `. Retry? ${shouldRetry}. `,

      at Object.warn [as retryStrategy] (src/examples/step/steps-with-retry/steps-with-retry.ts:19:13)
      at retryStrategy (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:463:31)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24
      at DurablePromise.awaitedChangeCallback [as _executor] (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:307:14)

    console.log
      Poll #1

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.warn
      Step Attempt #3. Error: Persistent failure
          at Object.<anonymous> (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples/src/examples/step/steps-with-retry/steps-with-retry.test.ts:107:32)
          at Promise.finally.completed (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:497:12) . Retry? true.

      17 |   retryStrategy: (error: Error, attemptsMade: number) => {
      18 |     const shouldRetry = attemptsMade <= 5;
    > 19 |     console.warn(
         |             ^
      20 |       `Step Attempt #${attemptsMade}.`,
      21 |       error,
      22 |       `. Retry? ${shouldRetry}. `,

      at Object.warn [as retryStrategy] (src/examples/step/steps-with-retry/steps-with-retry.ts:19:13)
      at retryStrategy (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:463:31)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24
      at DurablePromise.awaitedChangeCallback [as _executor] (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:307:14)

    console.log
      Poll #1

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.warn
      Step Attempt #4. Error: Persistent failure
          at Object.<anonymous> (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples/src/examples/step/steps-with-retry/steps-with-retry.test.ts:107:32)
          at Promise.finally.completed (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:497:12) . Retry? true.

      17 |   retryStrategy: (error: Error, attemptsMade: number) => {
      18 |     const shouldRetry = attemptsMade <= 5;
    > 19 |     console.warn(
         |             ^
      20 |       `Step Attempt #${attemptsMade}.`,
      21 |       error,
      22 |       `. Retry? ${shouldRetry}. `,

      at Object.warn [as retryStrategy] (src/examples/step/steps-with-retry/steps-with-retry.ts:19:13)
      at retryStrategy (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:463:31)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24
      at DurablePromise.awaitedChangeCallback [as _executor] (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:307:14)

    console.log
      Poll #1

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.warn
      Step Attempt #5. Error: Persistent failure
          at Object.<anonymous> (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples/src/examples/step/steps-with-retry/steps-with-retry.test.ts:107:32)
          at Promise.finally.completed (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:497:12) . Retry? true.

      17 |   retryStrategy: (error: Error, attemptsMade: number) => {
      18 |     const shouldRetry = attemptsMade <= 5;
    > 19 |     console.warn(
         |             ^
      20 |       `Step Attempt #${attemptsMade}.`,
      21 |       error,
      22 |       `. Retry? ${shouldRetry}. `,

      at Object.warn [as retryStrategy] (src/examples/step/steps-with-retry/steps-with-retry.ts:19:13)
      at retryStrategy (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:463:31)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24
      at DurablePromise.awaitedChangeCallback [as _executor] (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:307:14)

    console.log
      Poll #1

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.warn
      Step Attempt #6. Error: Persistent failure
          at Object.<anonymous> (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples/src/examples/step/steps-with-retry/steps-with-retry.test.ts:107:32)
          at Promise.finally.completed (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/jest-runner/build/testWorker.js:497:12) . Retry? false.

      17 |   retryStrategy: (error: Error, attemptsMade: number) => {
      18 |     const shouldRetry = attemptsMade <= 5;
    > 19 |     console.warn(
         |             ^
      20 |       `Step Attempt #${attemptsMade}.`,
      21 |       error,
      22 |       `. Retry? ${shouldRetry}. `,

      at Object.warn [as retryStrategy] (src/examples/step/steps-with-retry/steps-with-retry.ts:19:13)
      at retryStrategy (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:463:31)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24
      at DurablePromise.awaitedChangeCallback [as _executor] (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:307:14)

    console.error
      Failing - DDB Retries Exhausted.  StepError: Persistent failure
          at Function.fromErrorObject (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js/src/errors/durable-error/durable-error.ts:66:16)
          at fromErrorObject (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:502:35)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at /Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24
          at DurablePromise.awaitedChangeCallback [as _executor] (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:307:14) {
        cause: [Error: Persistent failure],
        errorData: undefined,
        stackTrace: undefined,
        errorType: 'StepError'
      }

      70 |       }
      71 |     } catch (e) {
    > 72 |       console.error("Failing - DDB Retries Exhausted. ", e);
         |               ^
      73 |       throw e;
      74 |     }
      75 |

      at error (src/examples/step/steps-with-retry/steps-with-retry.ts:72:15)
      at runHandler (../aws-durable-execution-sdk-js/src/with-durable-execution.ts:91:34)
      at ../aws-durable-execution-sdk-js/src/with-durable-execution.ts:221:18
      at InvokeHandler.invoke (../aws-durable-execution-sdk-js-testing/src/test-runner/local/invoke-handler.ts:64:12)
      at TestExecutionOrchestrator.invokeHandler (../aws-durable-execution-sdk-js-testing/src/test-runner/local/test-execution-orchestrator.ts:538:21)
      at ../aws-durable-execution-sdk-js-testing/src/test-runner/local/test-execution-orchestrator.ts:507:9

    console.log
      Poll #1

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.log
      Poll #2

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.log
      Poll #3

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.log
      Poll #4

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.log
      Poll #5

      at log (src/examples/step/steps-with-retry/steps-with-retry.ts:45:19)

    console.error
      Failing - DDB Item Not Found.

      75 |
      76 |     if (!item) {
    > 77 |       console.error("Failing - DDB Item Not Found.");
         |               ^
      78 |       throw new Error("Item Not Found");
      79 |     }
      80 |

      at error (src/examples/step/steps-with-retry/steps-with-retry.ts:77:15)
      at runHandler (../aws-durable-execution-sdk-js/src/with-durable-execution.ts:91:34)
      at ../aws-durable-execution-sdk-js/src/with-durable-execution.ts:221:18
      at InvokeHandler.invoke (../aws-durable-execution-sdk-js-testing/src/test-runner/local/invoke-handler.ts:64:12)
      at TestExecutionOrchestrator.invokeHandler (../aws-durable-execution-sdk-js-testing/src/test-runner/local/test-execution-orchestrator.ts:538:21)
      at scheduleAsyncFunction.checkpointApi.updateCheckpointData.executionId.executionId (../aws-durable-execution-sdk-js-testing/src/test-runner/local/test-execution-orchestrator.ts:357:9)
      at ../aws-durable-execution-sdk-js-testing/src/test-runner/local/test-execution-orchestrator.ts:507:9

PASS src/examples/wait-for-callback/multiple-invocations/wait-for-callback-multiple-invocations.test.ts (5.74 s)
  ● Console

    console.log
      First callback submitted with ID: eyJleGVjdXRpb25JZCI6ImY5NDY5ODQzLTcxNWUtNDA2ZS1iNzBiLTBjZGQ0Nzg1ODFkNCIsIm9wZXJhdGlvbklkIjoiOGZiZGJmNTU3M2IxOGZhZSIsInRva2VuIjoiOWNhODYxYjYtY2E0OS00ODQyLTgxNjAtZWJiZDMwYzM1MDczIn0=

      at log (src/examples/wait-for-callback/multiple-invocations/wait-for-callback-multiple-invocations.ts:23:15)

    console.log
      Second callback submitted with ID: eyJleGVjdXRpb25JZCI6ImY5NDY5ODQzLTcxNWUtNDA2ZS1iNzBiLTBjZGQ0Nzg1ODFkNCIsIm9wZXJhdGlvbklkIjoiMTlhMWRlMTY3MTIyYTE4YSIsInRva2VuIjoiNjYyMDQ4OGQtMmEyYi00NTA1LTg0YTAtZmVlYjVlMzA1YzI5In0=

      at log (src/examples/wait-for-callback/multiple-invocations/wait-for-callback-multiple-invocations.ts:39:15)

[2025-11-19T20:21:17.802Z] [ERROR] [HTTP] Checkpoint server error: Error: Could not start invocation for completed execution b515a4e3-c019-4c7a-be09-920f796b1288
    at ExecutionManager.startInvocation (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-testing/dist-cjs/checkpoint-server/index.js:1065:19)
    at /Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-testing/dist-cjs/checkpoint-server/index.js:1843:79
    at Layer.handleRequest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/router/lib/layer.js:152:17)
    at next (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/router/lib/route.js:157:13)
    at Route.dispatch (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/router/lib/route.js:117:3)
    at handle (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/router/index.js:435:11)
    at Layer.handleRequest (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/router/lib/layer.js:152:17)
    at /Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/router/index.js:295:15
    at param (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/router/index.js:600:14)
    at param (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/node_modules/router/index.js:610:14)
[2025-11-19T20:21:17.803Z] [ERROR] [HTTP] 127.0.0.1 - "POST /start-invocation/b515a4e3-c019-4c7a-be09-920f796b1288" 500 "-" "node" 2ms
PASS src/examples/promise/combinators/promise-combinators.test.ts
  ● Console

    console.log
      Starting promise combinators example with event: {}

      at log (src/examples/promise/combinators/promise-combinators.ts:36:13)

    console.log
      Step 1 executing

      at log (src/examples/promise/combinators/promise-combinators.ts:40:15)

    console.log
      Step 2 executing

      at log (src/examples/promise/combinators/promise-combinators.ts:46:15)

    console.log
      Step 3 executing

      at log (src/examples/promise/combinators/promise-combinators.ts:52:15)

    console.log
      Testing Promise.all...

      at log (src/examples/promise/combinators/promise-combinators.ts:58:13)

    console.log
      All results: [ 'Result from step 1', 'Result from step 2', 'Result from step 3' ]

      at log (src/examples/promise/combinators/promise-combinators.ts:64:13)

    console.log
      Testing Promise.race...

      at log (src/examples/promise/combinators/promise-combinators.ts:67:13)

    console.log
      Race result: Fast result

      at log (src/examples/promise/combinators/promise-combinators.ts:79:13)

    console.log
      Testing Promise.allSettled...

      at log (src/examples/promise/combinators/promise-combinators.ts:82:13)

    console.log
      Settled results: [
        { status: 'fulfilled', value: 'Success!' },
        {
          status: 'rejected',
          reason: Error [StepError]: This step failed
              at Function.fromErrorObject (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js/src/errors/durable-error/durable-error.ts:66:16)
              at fromErrorObject (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:502:35)
              at processTicksAndRejections (node:internal/process/task_queues:95:5)
              at /Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24
              at DurablePromise.awaitedChangeCallback [as _executor] (/Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:307:14)
        }
      ]

      at log (src/examples/promise/combinators/promise-combinators.ts:99:13)

    console.log
      Testing Promise.any...

      at log (src/examples/promise/combinators/promise-combinators.ts:102:13)

    console.log
      Any result: First success!

      at log (src/examples/promise/combinators/promise-combinators.ts:131:15)

PASS src/examples/promise/all-wait/promise-all-wait.test.ts (6.862 s)
PASS src/examples/promise/all-settled/promise-all-settled.test.ts
PASS src/examples/promise/any/promise-any.test.ts
PASS src/examples/wait-for-callback/submitter-failure-catchable/wait-for-callback-submitter-failure-catchable.test.ts (7.074 s)
FAIL src/examples/promise/unhandled-rejection/promise-unhandled-rejection.test.ts (7.209 s)
  ● promise-unhandled-rejection (local) › should complete successfully despite failing steps in promise combinators

    StepError: Step 4 failed

      64 |         );
      65 |       default:
    > 66 |         return new StepError(
         |                ^
      67 |           errorObject.ErrorMessage || "Unknown error",
      68 |           cause,
      69 |           errorObject.ErrorData,

      at Function.fromErrorObject (../aws-durable-execution-sdk-js/src/errors/durable-error/durable-error.ts:66:16)
      at fromErrorObject (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:502:35)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24

    Cause:



  ● promise-unhandled-rejection (local) › should complete successfully despite failing steps in promise combinators

    StepError: Step 5 failed

      64 |         );
      65 |       default:
    > 66 |         return new StepError(
         |                ^
      67 |           errorObject.ErrorMessage || "Unknown error",
      68 |           cause,
      69 |           errorObject.ErrorData,

      at Function.fromErrorObject (../aws-durable-execution-sdk-js/src/errors/durable-error/durable-error.ts:66:16)
      at fromErrorObject (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:502:35)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24

    Cause:



  ● promise-unhandled-rejection (local) › should complete successfully despite failing steps in promise combinators

    StepError: Step 6 failed

      64 |         );
      65 |       default:
    > 66 |         return new StepError(
         |                ^
      67 |           errorObject.ErrorMessage || "Unknown error",
      68 |           cause,
      69 |           errorObject.ErrorData,

      at Function.fromErrorObject (../aws-durable-execution-sdk-js/src/errors/durable-error/durable-error.ts:66:16)
      at fromErrorObject (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:502:35)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24

    Cause:



PASS src/examples/create-callback/simple/create-callback.test.ts
  ● Console

    console.log
      Created callback with ID: eyJleGVjdXRpb25JZCI6IjBjY2QyNmQ5LTRkMWQtNDBmMi1hNzQ0LTIzNWMyZWYwZTEwMCIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiYTczOTNiNTEtMGRiNi00NzE4LTk0NDgtZjBjNmY3Y2VjNWEyIn0=

      at log (src/examples/create-callback/simple/create-callback.ts:17:13)

    console.log
      Send this callbackId to external system: eyJleGVjdXRpb25JZCI6IjBjY2QyNmQ5LTRkMWQtNDBmMi1hNzQ0LTIzNWMyZWYwZTEwMCIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiYTczOTNiNTEtMGRiNi00NzE4LTk0NDgtZjBjNmY3Y2VjNWEyIn0=

      at log (src/examples/create-callback/simple/create-callback.ts:21:13)

    console.log
      Created callback with ID: eyJleGVjdXRpb25JZCI6IjBjY2QyNmQ5LTRkMWQtNDBmMi1hNzQ0LTIzNWMyZWYwZTEwMCIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiYTczOTNiNTEtMGRiNi00NzE4LTk0NDgtZjBjNmY3Y2VjNWEyIn0=

      at log (src/examples/create-callback/simple/create-callback.ts:17:13)

    console.log
      Send this callbackId to external system: eyJleGVjdXRpb25JZCI6IjBjY2QyNmQ5LTRkMWQtNDBmMi1hNzQ0LTIzNWMyZWYwZTEwMCIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiYTczOTNiNTEtMGRiNi00NzE4LTk0NDgtZjBjNmY3Y2VjNWEyIn0=

      at log (src/examples/create-callback/simple/create-callback.ts:21:13)

    console.log
      Created callback with ID: eyJleGVjdXRpb25JZCI6ImRlN2E0ZTNiLWNmYzYtNDE5Ny05Mzc4LWY0ZDYxN2MxOWQ4MyIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiNjUyYWUwNzMtMzgyYy00YWJiLWIzODUtZTJmOGE5YTJmMzVjIn0=

      at log (src/examples/create-callback/simple/create-callback.ts:17:13)

    console.log
      Send this callbackId to external system: eyJleGVjdXRpb25JZCI6ImRlN2E0ZTNiLWNmYzYtNDE5Ny05Mzc4LWY0ZDYxN2MxOWQ4MyIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiNjUyYWUwNzMtMzgyYy00YWJiLWIzODUtZTJmOGE5YTJmMzVjIn0=

      at log (src/examples/create-callback/simple/create-callback.ts:21:13)

    console.log
      Created callback with ID: eyJleGVjdXRpb25JZCI6ImRlN2E0ZTNiLWNmYzYtNDE5Ny05Mzc4LWY0ZDYxN2MxOWQ4MyIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiNjUyYWUwNzMtMzgyYy00YWJiLWIzODUtZTJmOGE5YTJmMzVjIn0=

      at log (src/examples/create-callback/simple/create-callback.ts:17:13)

    console.log
      Send this callbackId to external system: eyJleGVjdXRpb25JZCI6ImRlN2E0ZTNiLWNmYzYtNDE5Ny05Mzc4LWY0ZDYxN2MxOWQ4MyIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiNjUyYWUwNzMtMzgyYy00YWJiLWIzODUtZTJmOGE5YTJmMzVjIn0=

      at log (src/examples/create-callback/simple/create-callback.ts:21:13)

    console.log
      Created callback with ID: eyJleGVjdXRpb25JZCI6Ijk2ODYxMTM1LTE3MGUtNGVjNC1hNGZhLTkyYjAyOGVhMzFiYSIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiMDZhOTkxYjMtMWMzMC00YmQyLTg5OGEtNGUxNzcyOTlkZmE2In0=

      at log (src/examples/create-callback/simple/create-callback.ts:17:13)

    console.log
      Send this callbackId to external system: eyJleGVjdXRpb25JZCI6Ijk2ODYxMTM1LTE3MGUtNGVjNC1hNGZhLTkyYjAyOGVhMzFiYSIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiMDZhOTkxYjMtMWMzMC00YmQyLTg5OGEtNGUxNzcyOTlkZmE2In0=

      at log (src/examples/create-callback/simple/create-callback.ts:21:13)

    console.log
      Created callback with ID: eyJleGVjdXRpb25JZCI6Ijk2ODYxMTM1LTE3MGUtNGVjNC1hNGZhLTkyYjAyOGVhMzFiYSIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiMDZhOTkxYjMtMWMzMC00YmQyLTg5OGEtNGUxNzcyOTlkZmE2In0=

      at log (src/examples/create-callback/simple/create-callback.ts:17:13)

    console.log
      Send this callbackId to external system: eyJleGVjdXRpb25JZCI6Ijk2ODYxMTM1LTE3MGUtNGVjNC1hNGZhLTkyYjAyOGVhMzFiYSIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiMDZhOTkxYjMtMWMzMC00YmQyLTg5OGEtNGUxNzcyOTlkZmE2In0=

      at log (src/examples/create-callback/simple/create-callback.ts:21:13)

    console.log
      Created callback with ID: eyJleGVjdXRpb25JZCI6ImY3NTlmODg3LTVkYmItNGRhYi1iMWJjLWMzZGViYTliZTA2NyIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiYTY1NmRhNTgtNzZkMC00YmM5LTg5ZmEtYTcyZGQ5NTIzZTg0In0=

      at log (src/examples/create-callback/simple/create-callback.ts:17:13)

    console.log
      Send this callbackId to external system: eyJleGVjdXRpb25JZCI6ImY3NTlmODg3LTVkYmItNGRhYi1iMWJjLWMzZGViYTliZTA2NyIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiYTY1NmRhNTgtNzZkMC00YmM5LTg5ZmEtYTcyZGQ5NTIzZTg0In0=

      at log (src/examples/create-callback/simple/create-callback.ts:21:13)

    console.log
      Created callback with ID: eyJleGVjdXRpb25JZCI6ImY3NTlmODg3LTVkYmItNGRhYi1iMWJjLWMzZGViYTliZTA2NyIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiYTY1NmRhNTgtNzZkMC00YmM5LTg5ZmEtYTcyZGQ5NTIzZTg0In0=

      at log (src/examples/create-callback/simple/create-callback.ts:17:13)

    console.log
      Send this callbackId to external system: eyJleGVjdXRpb25JZCI6ImY3NTlmODg3LTVkYmItNGRhYi1iMWJjLWMzZGViYTliZTA2NyIsIm9wZXJhdGlvbklkIjoiYzRjYTQyMzhhMGI5MjM4MiIsInRva2VuIjoiYTY1NmRhNTgtNzZkMC00YmM5LTg5ZmEtYTcyZGQ5NTIzZTg0In0=

      at log (src/examples/create-callback/simple/create-callback.ts:21:13)

PASS src/examples/wait-for-callback/heartbeat-sends/wait-for-callback-heartbeat-sends.test.ts
PASS src/examples/step/with-retry/step-with-retry.test.ts
  ● Console

    console.log
      ┌─────────┬──────────┬──────┬────────┬─────────┬─────────────┬────────────────────────────┬────────────────────────────┬──────────┐
      │ (index) │ parentId │ name │ type   │ subType │ status      │ startTime                  │ endTime                    │ duration │
      ├─────────┼──────────┼──────┼────────┼─────────┼─────────────┼────────────────────────────┼────────────────────────────┼──────────┤
      │ 0       │ '-'      │ '-'  │ 'STEP' │ 'Step'  │ 'SUCCEEDED' │ '2025-11-19T20:21:19.905Z' │ '2025-11-19T20:21:19.931Z' │ '26ms'   │
      └─────────┴──────────┴──────┴────────┴─────────┴─────────────┴────────────────────────────┴────────────────────────────┴──────────┘

      at Object.table (../aws-durable-execution-sdk-js-testing/src/test-runner/local/result-formatter.ts:124:17)

PASS src/examples/create-callback/timeout/create-callback-timeout.test.ts
PASS src/examples/logger-test/after-callback/logger-after-callback.test.ts
  ● Console

    console.log
      info Before createCallback {
        timestamp: '2025-11-19T20:21:20.355Z',
        execution_arn: 'bd08d0e1-f5b5-4ef9-a903-593dc4d36203',
        level: 'info',
        message: 'Before createCallback'
      }

      at Object.log [as info] (../aws-durable-execution-sdk-js/src/utils/logger/default-logger.ts:12:13)

    console.log
      info After createCallback {
        timestamp: '2025-11-19T20:21:20.381Z',
        execution_arn: 'bd08d0e1-f5b5-4ef9-a903-593dc4d36203',
        level: 'info',
        message: 'After createCallback'
      }

      at Object.log [as info] (../aws-durable-execution-sdk-js/src/utils/logger/default-logger.ts:12:13)

PASS src/examples/create-callback/heartbeat/create-callback-heartbeat.test.ts
PASS src/examples/map/large-scale/map-large-scale.test.ts
PASS src/examples/concurrent/operations/concurrent-operations.test.ts
PASS src/examples/parallel/wait/parallel-wait.test.ts (8.915 s)
  ● Console

    console.log
      Before waits

      at log (src/examples/parallel/wait/parallel-wait.ts:14:13)

    console.log
      Before waits

      at log (src/examples/parallel/wait/parallel-wait.ts:14:13)

    console.log
      Before waits

      at log (src/examples/parallel/wait/parallel-wait.ts:14:13)

    console.log
      Before waits

      at log (src/examples/parallel/wait/parallel-wait.ts:14:13)

    console.log
      After waits

      at log (src/examples/parallel/wait/parallel-wait.ts:23:13)

PASS src/examples/promise/all/promise-all.test.ts
PASS src/examples/wait-for-condition/wait-for-condition.test.ts
PASS src/examples/no-replay-execution/no-replay-execution.test.ts
PASS src/examples/wait-for-callback/anonymous/wait-for-callback-anonymous.test.ts
PASS src/examples/promise/replay/promise-replay.test.ts
PASS src/examples/wait-for-callback/timeout/wait-for-callback-timeout.test.ts
PASS src/examples/run-in-child-context/basic/run-in-child-context.test.ts
PASS src/examples/handler-error/handler-error.test.ts
PASS src/examples/wait-for-callback/submitter-retry-success/wait-for-callback-submitter-retry-success.test.ts
  ● Console

    console.log
      info Submitting callback to external system {
        timestamp: '2025-11-19T20:21:21.306Z',
        execution_arn: '8a9ad54c-f1b3-4c67-8d8e-73352256f8fb',
        level: 'info',
        step_id: '98c6f2c2287f4c73',
        attempt: 0,
        message: 'Submitting callback to external system',
        data: {
          callbackId: 'eyJleGVjdXRpb25JZCI6IjhhOWFkNTRjLWYxYjMtNGM2Ny04ZDhlLTczMzUyMjU2ZjhmYiIsIm9wZXJhdGlvbklkIjoiZWE2NmMwNmMxZTFjMDVmYSIsInRva2VuIjoiNmNlN2M2MjEtN2VmZi00ZmZlLWFkOTktNTAyOTc3NzAzMmJiIn0='
        }
      }

      at Object.log [as info] (../aws-durable-execution-sdk-js/src/utils/logger/default-logger.ts:12:13)

    console.log
      info Successfully submitted callback {
        timestamp: '2025-11-19T20:21:21.309Z',
        execution_arn: '8a9ad54c-f1b3-4c67-8d8e-73352256f8fb',
        level: 'info',
        step_id: '98c6f2c2287f4c73',
        attempt: 0,
        message: 'Successfully submitted callback',
        data: {
          callbackId: 'eyJleGVjdXRpb25JZCI6IjhhOWFkNTRjLWYxYjMtNGM2Ny04ZDhlLTczMzUyMjU2ZjhmYiIsIm9wZXJhdGlvbklkIjoiZWE2NmMwNmMxZTFjMDVmYSIsInRva2VuIjoiNmNlN2M2MjEtN2VmZi00ZmZlLWFkOTktNTAyOTc3NzAzMmJiIn0='
        }
      }

      at Object.log [as info] (../aws-durable-execution-sdk-js/src/utils/logger/default-logger.ts:12:13)

    console.log
      info Submitting callback to external system {
        timestamp: '2025-11-19T20:21:21.430Z',
        execution_arn: 'fdcbcc23-b02e-4923-9385-41a0001bea83',
        level: 'info',
        step_id: '98c6f2c2287f4c73',
        attempt: 0,
        message: 'Submitting callback to external system',
        data: {
          callbackId: 'eyJleGVjdXRpb25JZCI6ImZkY2JjYzIzLWIwMmUtNDkyMy05Mzg1LTQxYTAwMDFiZWE4MyIsIm9wZXJhdGlvbklkIjoiZWE2NmMwNmMxZTFjMDVmYSIsInRva2VuIjoiNjRhOGJhZTEtMjNlMC00Y2Y5LTk4MDItNDNjZjFhYWU0YzUyIn0='
        }
      }

      at Object.log [as info] (../aws-durable-execution-sdk-js/src/utils/logger/default-logger.ts:12:13)

    console.log
      info Submitting callback to external system {
        timestamp: '2025-11-19T20:21:21.440Z',
        execution_arn: 'fdcbcc23-b02e-4923-9385-41a0001bea83',
        level: 'info',
        step_id: '98c6f2c2287f4c73',
        attempt: 1,
        message: 'Submitting callback to external system',
        data: {
          callbackId: 'eyJleGVjdXRpb25JZCI6ImZkY2JjYzIzLWIwMmUtNDkyMy05Mzg1LTQxYTAwMDFiZWE4MyIsIm9wZXJhdGlvbklkIjoiZWE2NmMwNmMxZTFjMDVmYSIsInRva2VuIjoiNjRhOGJhZTEtMjNlMC00Y2Y5LTk4MDItNDNjZjFhYWU0YzUyIn0='
        }
      }

      at Object.log [as info] (../aws-durable-execution-sdk-js/src/utils/logger/default-logger.ts:12:13)

    console.log
      info Submitting callback to external system {
        timestamp: '2025-11-19T20:21:21.445Z',
        execution_arn: 'fdcbcc23-b02e-4923-9385-41a0001bea83',
        level: 'info',
        step_id: '98c6f2c2287f4c73',
        attempt: 2,
        message: 'Submitting callback to external system',
        data: {
          callbackId: 'eyJleGVjdXRpb25JZCI6ImZkY2JjYzIzLWIwMmUtNDkyMy05Mzg1LTQxYTAwMDFiZWE4MyIsIm9wZXJhdGlvbklkIjoiZWE2NmMwNmMxZTFjMDVmYSIsInRva2VuIjoiNjRhOGJhZTEtMjNlMC00Y2Y5LTk4MDItNDNjZjFhYWU0YzUyIn0='
        }
      }

      at Object.log [as info] (../aws-durable-execution-sdk-js/src/utils/logger/default-logger.ts:12:13)

    console.log
      info Submitting callback to external system {
        timestamp: '2025-11-19T20:21:21.455Z',
        execution_arn: 'fdcbcc23-b02e-4923-9385-41a0001bea83',
        level: 'info',
        step_id: '98c6f2c2287f4c73',
        attempt: 3,
        message: 'Submitting callback to external system',
        data: {
          callbackId: 'eyJleGVjdXRpb25JZCI6ImZkY2JjYzIzLWIwMmUtNDkyMy05Mzg1LTQxYTAwMDFiZWE4MyIsIm9wZXJhdGlvbklkIjoiZWE2NmMwNmMxZTFjMDVmYSIsInRva2VuIjoiNjRhOGJhZTEtMjNlMC00Y2Y5LTk4MDItNDNjZjFhYWU0YzUyIn0='
        }
      }

      at Object.log [as info] (../aws-durable-execution-sdk-js/src/utils/logger/default-logger.ts:12:13)

PASS src/examples/wait-for-callback/failures/wait-for-callback-failures.test.ts
PASS src/examples/step/basic/step-basic.test.ts
PASS src/examples/parallel/min-successful-with-callback/parallel-min-successful-callback.test.ts
  ● Console

    console.log
      Branch 1 callback ID: eyJleGVjdXRpb25JZCI6IjYxN2ZjNDZmLTAxMGUtNDRjYy1hY2ZiLTU4MmIzYzRjNDE5MiIsIm9wZXJhdGlvbklkIjoiMmYyMjFhMThlYjg2MzgwMyIsInRva2VuIjoiN2Y1ZmFjM2MtNDBiZC00NTVlLWI1MTEtNGQ0MWNlNmMwM2I1In0=

      at Object.log [as data] (src/examples/parallel/min-successful-with-callback/parallel-min-successful-callback.ts:21:19)

    console.log
      Branch 2 callback ID: eyJleGVjdXRpb25JZCI6IjYxN2ZjNDZmLTAxMGUtNDRjYy1hY2ZiLTU4MmIzYzRjNDE5MiIsIm9wZXJhdGlvbklkIjoiNjE1MWY1YWIyODJkOTBlNCIsInRva2VuIjoiZDA1ODU5MjgtMGJlZS00N2I2LWIyNWYtNDhjZjk5YWIyMDc4In0=

      at Object.log [as data] (src/examples/parallel/min-successful-with-callback/parallel-min-successful-callback.ts:27:19)

    console.log
      Branch 3 callback ID: eyJleGVjdXRpb25JZCI6IjYxN2ZjNDZmLTAxMGUtNDRjYy1hY2ZiLTU4MmIzYzRjNDE5MiIsIm9wZXJhdGlvbklkIjoiYjQyNWUwYzc1NTkxYWE4ZiIsInRva2VuIjoiYTZiNTYwNzEtZTQzMS00NDUwLWJkNTEtMjI0YjIwZDk3M2M3In0=

      at Object.log [as data] (src/examples/parallel/min-successful-with-callback/parallel-min-successful-callback.ts:33:19)

    console.log
      Branch 2 callback ID: eyJleGVjdXRpb25JZCI6IjYxN2ZjNDZmLTAxMGUtNDRjYy1hY2ZiLTU4MmIzYzRjNDE5MiIsIm9wZXJhdGlvbklkIjoiNjE1MWY1YWIyODJkOTBlNCIsInRva2VuIjoiZDA1ODU5MjgtMGJlZS00N2I2LWIyNWYtNDhjZjk5YWIyMDc4In0=

      at Object.log [as data] (src/examples/parallel/min-successful-with-callback/parallel-min-successful-callback.ts:27:19)

    console.log
      Branch 3 callback ID: eyJleGVjdXRpb25JZCI6IjYxN2ZjNDZmLTAxMGUtNDRjYy1hY2ZiLTU4MmIzYzRjNDE5MiIsIm9wZXJhdGlvbklkIjoiYjQyNWUwYzc1NTkxYWE4ZiIsInRva2VuIjoiYTZiNTYwNzEtZTQzMS00NDUwLWJkNTEtMjI0YjIwZDk3M2M3In0=

      at Object.log [as data] (src/examples/parallel/min-successful-with-callback/parallel-min-successful-callback.ts:33:19)

    console.log
      Branch 1 callback ID: eyJleGVjdXRpb25JZCI6IjYxN2ZjNDZmLTAxMGUtNDRjYy1hY2ZiLTU4MmIzYzRjNDE5MiIsIm9wZXJhdGlvbklkIjoiMmYyMjFhMThlYjg2MzgwMyIsInRva2VuIjoiN2Y1ZmFjM2MtNDBiZC00NTVlLWI1MTEtNGQ0MWNlNmMwM2I1In0=

      at Object.log [as data] (src/examples/parallel/min-successful-with-callback/parallel-min-successful-callback.ts:21:19)

PASS src/examples/retry-exhaustion/retry-exhaustion.test.ts
PASS src/examples/create-callback/failures/create-callback-failures.test.ts
PASS src/examples/context-validation/parent-context-in-child/parent-context-in-child.test.ts
  ● Console

    console.log
      Starting parent context operations

      at log (src/examples/context-validation/parent-context-in-child/parent-context-in-child.ts:15:13)

    console.log
      Inside child context

      at log (src/examples/context-validation/parent-context-in-child/parent-context-in-child.ts:21:17)

PASS src/examples/map-completion-config-issue/map-completion-config-issue.test.ts
  ● Console

    console.log
      Starting map with config: {"minSuccessful":2,"toleratedFailurePercentage":50}

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:30:13)

    console.log
      Items pattern: SUCCESS, FAIL, SUCCESS, FAIL, SUCCESS

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:31:13)

    console.log
      Processing item 1 (index 0), shouldFail: false

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:40:17)

    console.log
      Processing item 2 (index 1), shouldFail: true

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:40:17)

    console.log
      Processing item 3 (index 2), shouldFail: false

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:40:17)

    console.log
      Processing item 4 (index 3), shouldFail: true

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:40:17)

    console.log
      Map completed with results:

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:77:13)

    console.log
      Total items processed: 4

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:78:13)

    console.log
      Successful items: 2

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:79:13)

    console.log
      Failed items: 0

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:80:13)

    console.log
      Has failures: false

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:81:13)

    console.log
      Batch status: SUCCEEDED

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:82:13)

    console.log
      Completion reason: MIN_SUCCESSFUL_REACHED

      at log (src/examples/map-completion-config-issue/map-completion-config-issue.ts:83:13)

    console.log
      === ACTUAL RESULTS ===

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:38:15)

    console.log
      Total items processed: 4

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:39:15)

    console.log
      Successful count: 2

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:40:15)

    console.log
      Failed count: 0

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:41:15)

    console.log
      Has failures: false

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:42:15)

    console.log
      Batch status: SUCCEEDED

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:43:15)

    console.log
      Completion reason: MIN_SUCCESSFUL_REACHED

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:44:15)

    console.log
      Successful items: [
        {
          "index": 0,
          "itemId": 1
        },
        {
          "index": 2,
          "itemId": 3
        }
      ]

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:45:15)

    console.log
      Failed items: []

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:49:15)

    console.log
      === EXECUTION DETAILS ===

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:62:15)

    console.log
      Total operations: 9

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:64:15)

    console.log
      Map operation child count: 4

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:67:15)

    console.log
      === ALL OPERATIONS ===

      at Object.<anonymous> (src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:73:15)

    console.log
      0: completion-config-items - CONTEXT

      at src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:75:17
          at Array.forEach (<anonymous>)

    console.log
      1: map-item-0 - CONTEXT

      at src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:75:17
          at Array.forEach (<anonymous>)

    console.log
      2: process-item-0 - STEP

      at src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:75:17
          at Array.forEach (<anonymous>)

    console.log
      3: map-item-1 - CONTEXT

      at src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:75:17
          at Array.forEach (<anonymous>)

    console.log
      4: process-item-1 - STEP

      at src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:75:17
          at Array.forEach (<anonymous>)

    console.log
      5: map-item-2 - CONTEXT

      at src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:75:17
          at Array.forEach (<anonymous>)

    console.log
      6: process-item-2 - STEP

      at src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:75:17
          at Array.forEach (<anonymous>)

    console.log
      7: map-item-3 - CONTEXT

      at src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:75:17
          at Array.forEach (<anonymous>)

    console.log
      8: process-item-3 - STEP

      at src/examples/map-completion-config-issue/map-completion-config-issue.test.ts:75:17
          at Array.forEach (<anonymous>)

PASS src/examples/wait-for-callback/nested/wait-for-callback-nested.test.ts
PASS src/examples/create-callback/concurrent/create-callback-concurrent.test.ts
PASS src/examples/parallel/basic/parallel-basic.test.ts
PASS src/examples/step/named/step-named.test.ts
PASS src/examples/hello-world/hello-world.test.ts
  ● Console

    console.log
      Hello world from a durable function!

      at log (src/examples/hello-world/hello-world.ts:14:13)

PASS src/examples/create-callback/mixed-ops/create-callback-mixed-ops.test.ts
PASS src/examples/multiple-waits/multiple-waits.test.ts
PASS src/examples/wait/named/wait-named.test.ts
  ● Console

    console.log
      Starting wait operation

      at log (src/examples/wait/named/wait-named.ts:14:13)

    console.log
      Starting wait operation

      at log (src/examples/wait/named/wait-named.ts:14:13)

    console.log
      Wait completed

      at log (src/examples/wait/named/wait-named.ts:16:13)

PASS src/examples/block-example/block-example.test.ts
  ● Console

    console.log
      Handler started

      at log (src/examples/block-example/block-example.ts:14:13)

    console.log
      Inside parent block

      at log (src/examples/block-example/block-example.ts:20:17)

    console.log
      Inside nested step

      at log (src/examples/block-example/block-example.ts:26:21)

    console.log
      Inside nested block

      at log (src/examples/block-example/block-example.ts:35:21)

    console.log
      Handler started

      at log (src/examples/block-example/block-example.ts:14:13)

    console.log
      Inside parent block

      at log (src/examples/block-example/block-example.ts:20:17)

    console.log
      Inside nested block

      at log (src/examples/block-example/block-example.ts:35:21)

    console.log
      Block completed with result: {
        nestedStep: 'nested step result',
        nestedBlock: 'nested block result'
      }

      at log (src/examples/block-example/block-example.ts:51:13)

    console.log
      Handler started

      at log (src/examples/block-example/block-example.ts:14:13)

    console.log
      Inside parent block

      at log (src/examples/block-example/block-example.ts:20:17)

    console.log
      Inside nested step

      at log (src/examples/block-example/block-example.ts:26:21)

    console.log
      Inside nested block

      at log (src/examples/block-example/block-example.ts:35:21)

    console.log
      Handler started

      at log (src/examples/block-example/block-example.ts:14:13)

    console.log
      Inside parent block

      at log (src/examples/block-example/block-example.ts:20:17)

    console.log
      Inside nested block

      at log (src/examples/block-example/block-example.ts:35:21)

    console.log
      Block completed with result: {
        nestedStep: 'nested step result',
        nestedBlock: 'nested block result'
      }

      at log (src/examples/block-example/block-example.ts:51:13)

PASS src/examples/step/step-error-determinism/step-error-determinism.test.ts
PASS src/examples/create-callback/serdes/create-callback-serdes.test.ts
PASS src/examples/simple-execution/simple-execution.test.ts
PASS src/examples/run-in-child-context/large-data/run-in-child-context-large-data.test.ts
PASS src/examples/map/basic/map-basic.test.ts
PASS src/examples/context-validation/parent-context-in-wait-condition/parent-context-in-wait-condition.test.ts
  ● Console

    console.log
      Starting parent context operations

      at log (src/examples/context-validation/parent-context-in-wait-condition/parent-context-in-wait-condition.ts:15:13)

    console.log
      Inside child context

      at log (src/examples/context-validation/parent-context-in-wait-condition/parent-context-in-wait-condition.ts:20:17)

PASS src/examples/wait-for-callback/mixed-ops/wait-for-callback-mixed-ops.test.ts
PASS src/examples/logger-test/after-wait/logger-after-wait.test.ts
  ● Console

    console.log
      info Before wait {
        timestamp: '2025-11-19T20:21:23.223Z',
        execution_arn: '0e81023e-bf05-4e12-a0bd-07cbc0bb9cea',
        level: 'info',
        message: 'Before wait'
      }

      at Object.log [as info] (../aws-durable-execution-sdk-js/src/utils/logger/default-logger.ts:12:13)

    console.log
      info After wait {
        timestamp: '2025-11-19T20:21:23.240Z',
        execution_arn: '0e81023e-bf05-4e12-a0bd-07cbc0bb9cea',
        level: 'info',
        message: 'After wait'
      }

      at Object.log [as info] (../aws-durable-execution-sdk-js/src/utils/logger/default-logger.ts:12:13)

PASS src/examples/wait-for-callback/basic/wait-for-callback.test.ts
  ● Console

    console.log
      Hello world before callback!

      at log (src/examples/wait-for-callback/basic/wait-for-callback.ts:18:13)

    console.log
      Calling my external system with callback id: eyJleGVjdXRpb25JZCI6IjBjNTkwNjY1LWNkYWQtNDIwOS1hMGU0LTNlMzAwMjQwZWY1MyIsIm9wZXJhdGlvbklkIjoiZWE2NmMwNmMxZTFjMDVmYSIsInRva2VuIjoiZjU3YzEwNzYtNTAyMS00OTEyLWE5NmUtNGQyZTdlNzgwYjJkIn0=

      at log (src/examples/wait-for-callback/basic/wait-for-callback.ts:13:11)

    console.log
      Hello world before callback!

      at log (src/examples/wait-for-callback/basic/wait-for-callback.ts:18:13)

    console.log
      Hello world after callback!

      at log (src/examples/wait-for-callback/basic/wait-for-callback.ts:26:13)

    console.log
      Hello world before callback!

      at log (src/examples/wait-for-callback/basic/wait-for-callback.ts:18:13)

    console.log
      Calling my external system with callback id: eyJleGVjdXRpb25JZCI6ImQ5YTI0N2FhLWIxMjgtNDU2OS1hMjQ5LWMzM2U0NTc0ZmJhMyIsIm9wZXJhdGlvbklkIjoiZWE2NmMwNmMxZTFjMDVmYSIsInRva2VuIjoiNzY0M2UxNGQtZDczZS00YzY1LWE0ZmYtNDBhYzZjOTI5YTQ4In0=

      at log (src/examples/wait-for-callback/basic/wait-for-callback.ts:13:11)

    console.log
      Hello world before callback!

      at log (src/examples/wait-for-callback/basic/wait-for-callback.ts:18:13)

PASS src/examples/wait/basic/wait.test.ts
  ● Console

    console.log
      Hello world before wait!

      at log (src/examples/wait/basic/wait.ts:14:13)

    console.log
      Hello world before wait!

      at log (src/examples/wait/basic/wait.ts:14:13)

    console.log
      Hello world after wait!

      at log (src/examples/wait/basic/wait.ts:16:13)

PASS src/examples/wait-for-callback/child-context/wait-for-callback-child-context.test.ts
  ● Console

    console.log
      parent callback op {
        ContextDetails: {},
        Id: 'c4ca4238a0b92382',
        Name: 'parent-callback-op',
        StartTimestamp: 2025-11-19T20:21:23.477Z,
        Status: 'STARTED',
        SubType: 'WaitForCallback',
        Type: 'CONTEXT'
      }

      at Object.<anonymous> (src/examples/wait-for-callback/child-context/wait-for-callback-child-context.test.ts:30:15)

    console.log
      child callback op {
        ContextDetails: {},
        Id: '3c46a0407be60a1f',
        Name: 'child-callback-op',
        ParentId: 'c81e728d9d4c2f63',
        StartTimestamp: 2025-11-19T20:21:23.602Z,
        Status: 'STARTED',
        SubType: 'WaitForCallback',
        Type: 'CONTEXT'
      }

      at Object.<anonymous> (src/examples/wait-for-callback/child-context/wait-for-callback-child-context.test.ts:36:15)

PASS src/examples/parallel/heterogeneous/parallel-heterogeneous.test.ts
PASS src/examples/run-in-child-context/with-failing-step/run-in-child-context-failing-step.test.ts
PASS src/examples/promise/race/promise-race.test.ts
PASS src/examples/comprehensive-operations/comprehensive-operations.test.ts
  ● Console

    console.log
      Starting comprehensive operations example with event: {}

      at log (src/examples/comprehensive-operations/comprehensive-operations.ts:26:13)

    console.log
      Executing step1

      at log (src/examples/comprehensive-operations/comprehensive-operations.ts:30:15)

    console.log
      Starting comprehensive operations example with event: {}

      at log (src/examples/comprehensive-operations/comprehensive-operations.ts:26:13)

PASS src/__tests__/generate-sam-template.test.ts
PASS src/examples/undefined-results/undefined-results.test.ts
PASS src/examples/wait-for-callback/serdes/wait-for-callback-serdes.test.ts
PASS src/examples/context-validation/parent-context-in-step/parent-context-in-step.test.ts
  ● Console

    console.log
      Starting parent context operations

      at log (src/examples/context-validation/parent-context-in-step/parent-context-in-step.ts:15:13)

    console.log
      Inside child context

      at log (src/examples/context-validation/parent-context-in-step/parent-context-in-step.ts:21:17)

PASS src/examples/concurrent/wait/concurrent-wait.test.ts (13.85 s)
  ● Console

    console.log
      Before waits

      at log (src/examples/concurrent/wait/concurrent-wait.ts:14:13)

    console.log
      Before waits

      at log (src/examples/concurrent/wait/concurrent-wait.ts:14:13)

    console.log
      Before waits

      at log (src/examples/concurrent/wait/concurrent-wait.ts:14:13)

    console.log
      Before waits

      at log (src/examples/concurrent/wait/concurrent-wait.ts:14:13)

    console.log
      After waits

      at log (src/examples/concurrent/wait/concurrent-wait.ts:20:13)

------------------------------------------------------------------|---------|----------|---------|---------|-----------------------
File                                                              | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s     
------------------------------------------------------------------|---------|----------|---------|---------|-----------------------
All files                                                         |   90.57 |    67.82 |   92.59 |   90.74 |                       
 scripts                                                          |   66.17 |    79.31 |   84.61 |   65.67 |                       
  generate-sam-template.js                                        |   66.17 |    79.31 |   84.61 |   65.67 | 46,57,149,214-251,257 
 src/examples/block-example                                       |     100 |      100 |     100 |     100 |                       
  block-example.ts                                                |     100 |      100 |     100 |     100 |                       
 src/examples/comprehensive-operations                            |     100 |      100 |     100 |     100 |                       
  comprehensive-operations.ts                                     |     100 |      100 |     100 |     100 |                       
 src/examples/concurrent/operations                               |     100 |      100 |     100 |     100 |                       
  concurrent-operations.ts                                        |     100 |      100 |     100 |     100 |                       
 src/examples/concurrent/wait                                     |     100 |      100 |     100 |     100 |                       
  concurrent-wait.ts                                              |     100 |      100 |     100 |     100 |                       
 src/examples/context-validation/parent-context-in-child          |      80 |      100 |     100 |      80 |                       
  parent-context-in-child.ts                                      |      80 |      100 |     100 |      80 | 30-34                 
 src/examples/context-validation/parent-context-in-step           |   73.33 |      100 |     100 |   73.33 |                       
  parent-context-in-step.ts                                       |   73.33 |      100 |     100 |   73.33 | 38-49                 
 src/examples/context-validation/parent-context-in-wait-condition |   64.28 |        0 |      80 |   64.28 |                       
  parent-context-in-wait-condition.ts                             |   64.28 |        0 |      80 |   64.28 | 31-49                 
 src/examples/create-callback/concurrent                          |     100 |      100 |     100 |     100 |                       
  create-callback-concurrent.ts                                   |     100 |      100 |     100 |     100 |                       
 src/examples/create-callback/failures                            |      50 |       25 |     100 |      50 |                       
  create-callback-failures.ts                                     |      50 |       25 |     100 |      50 | 17-28,39              
 src/examples/create-callback/heartbeat                           |     100 |       50 |     100 |     100 |                       
  create-callback-heartbeat.ts                                    |     100 |       50 |     100 |     100 | 23                    
 src/examples/create-callback/mixed-ops                           |     100 |      100 |     100 |     100 |                       
  create-callback-mixed-ops.ts                                    |     100 |      100 |     100 |     100 |                       
 src/examples/create-callback/serdes                              |   71.42 |       25 |   66.66 |   83.33 |                       
  create-callback-serdes.ts                                       |   71.42 |       25 |   66.66 |   83.33 | 23-24                 
 src/examples/create-callback/simple                              |     100 |      100 |     100 |     100 |                       
  create-callback.ts                                              |     100 |      100 |     100 |     100 |                       
 src/examples/create-callback/timeout                             |   83.33 |      100 |     100 |   83.33 |                       
  create-callback-timeout.ts                                      |   83.33 |      100 |     100 |   83.33 | 28                    
 src/examples/handler-error                                       |     100 |      100 |     100 |     100 |                       
  handler-error.ts                                                |     100 |      100 |     100 |     100 |                       
 src/examples/hello-world                                         |     100 |      100 |     100 |     100 |                       
  hello-world.ts                                                  |     100 |      100 |     100 |     100 |                       
 src/examples/logger-test/after-callback                          |   77.77 |    83.33 |   33.33 |   77.77 |                       
  logger-after-callback.ts                                        |   77.77 |    83.33 |   33.33 |   77.77 | 20,32-44              
 src/examples/logger-test/after-wait                              |   76.47 |    83.33 |   33.33 |   76.47 |                       
  logger-after-wait.ts                                            |   76.47 |    83.33 |   33.33 |   76.47 | 20,32-44              
 src/examples/map-completion-config-issue                         |   92.59 |    83.33 |   85.71 |   92.59 |                       
  map-completion-config-issue.ts                                  |   92.59 |    83.33 |   85.71 |   92.59 | 64,96                 
 src/examples/map/basic                                           |     100 |      100 |     100 |     100 |                       
  map-basic.ts                                                    |     100 |      100 |     100 |     100 |                       
 src/examples/map/large-scale                                     |     100 |      100 |     100 |     100 |                       
  map-large-scale.ts                                              |     100 |      100 |     100 |     100 |                       
 src/examples/multiple-waits                                      |     100 |      100 |     100 |     100 |                       
  multiple-waits.ts                                               |     100 |      100 |     100 |     100 |                       
 src/examples/no-replay-execution                                 |     100 |      100 |     100 |     100 |                       
  no-replay-execution.ts                                          |     100 |      100 |     100 |     100 |                       
 src/examples/parallel/basic                                      |     100 |      100 |     100 |     100 |                       
  parallel-basic.ts                                               |     100 |      100 |     100 |     100 |                       
 src/examples/parallel/heterogeneous                              |     100 |      100 |     100 |     100 |                       
  parallel-heterogeneous.ts                                       |     100 |      100 |     100 |     100 |                       
 src/examples/parallel/min-successful-with-callback               |     100 |      100 |     100 |     100 |                       
  parallel-min-successful-callback.ts                             |     100 |      100 |     100 |     100 |                       
 src/examples/parallel/wait                                       |     100 |      100 |     100 |     100 |                       
  parallel-wait.ts                                                |     100 |      100 |     100 |     100 |                       
 src/examples/promise/all                                         |     100 |      100 |     100 |     100 |                       
  promise-all.ts                                                  |     100 |      100 |     100 |     100 |                       
 src/examples/promise/all-settled                                 |     100 |      100 |     100 |     100 |                       
  promise-all-settled.ts                                          |     100 |      100 |     100 |     100 |                       
 src/examples/promise/all-wait                                    |     100 |      100 |     100 |     100 |                       
  promise-all-wait.ts                                             |     100 |      100 |     100 |     100 |                       
 src/examples/promise/any                                         |     100 |      100 |     100 |     100 |                       
  promise-any.ts                                                  |     100 |      100 |     100 |     100 |                       
 src/examples/promise/combinators                                 |   96.49 |      100 |     100 |   96.07 |                       
  promise-combinators.ts                                          |   96.49 |      100 |     100 |   96.07 | 133-134               
 src/examples/promise/race                                        |     100 |      100 |     100 |     100 |                       
  promise-race.ts                                                 |     100 |      100 |     100 |     100 |                       
 src/examples/promise/replay                                      |     100 |      100 |     100 |     100 |                       
  promise-replay.ts                                               |     100 |      100 |     100 |     100 |                       
 src/examples/promise/unhandled-rejection                         |     100 |      100 |     100 |     100 |                       
  promise-unhandled-rejection.ts                                  |     100 |      100 |     100 |     100 |                       
 src/examples/retry-exhaustion                                    |    87.5 |      100 |     100 |    87.5 |                       
  retry-exhaustion.ts                                             |    87.5 |      100 |     100 |    87.5 | 25                    
 src/examples/run-in-child-context/basic                          |     100 |      100 |     100 |     100 |                       
  run-in-child-context.ts                                         |     100 |      100 |     100 |     100 |                       
 src/examples/run-in-child-context/checkpoint-size-limit          |     100 |      100 |     100 |     100 |                       
  run-in-child-context-checkpoint-size-limit.ts                   |     100 |      100 |     100 |     100 |                       
 src/examples/run-in-child-context/large-data                     |     100 |      100 |     100 |     100 |                       
  run-in-child-context-large-data.ts                              |     100 |      100 |     100 |     100 |                       
 src/examples/run-in-child-context/with-failing-step              |   91.66 |       50 |     100 |   91.66 |                       
  run-in-child-context-failing-step.ts                            |   91.66 |       50 |     100 |   91.66 | 39                    
 src/examples/simple-execution                                    |     100 |      100 |     100 |     100 |                       
  simple-execution.ts                                             |     100 |      100 |     100 |     100 |                       
 src/examples/step/basic                                          |     100 |      100 |     100 |     100 |                       
  step-basic.ts                                                   |     100 |      100 |     100 |     100 |                       
 src/examples/step/named                                          |     100 |      100 |     100 |     100 |                       
  step-named.ts                                                   |     100 |      100 |     100 |     100 |                       
 src/examples/step/step-error-determinism                         |     100 |      100 |     100 |     100 |                       
  step-error-determinism.ts                                       |     100 |      100 |     100 |     100 |                       
 src/examples/step/steps-with-retry                               |   96.77 |     87.5 |     100 |   96.77 |                       
  steps-with-retry.ts                                             |   96.77 |     87.5 |     100 |   96.77 | 48                    
 src/examples/step/with-retry                                     |     100 |      100 |     100 |     100 |                       
  step-with-retry.ts                                              |     100 |      100 |     100 |     100 |                       
 src/examples/undefined-results                                   |     100 |      100 |     100 |     100 |                       
  undefined-results.ts                                            |     100 |      100 |     100 |     100 |                       
 src/examples/wait-for-callback/anonymous                         |     100 |      100 |     100 |     100 |                       
  wait-for-callback-anonymous.ts                                  |     100 |      100 |     100 |     100 |                       
 src/examples/wait-for-callback/basic                             |     100 |      100 |     100 |     100 |                       
  wait-for-callback.ts                                            |     100 |      100 |     100 |     100 |                       
 src/examples/wait-for-callback/child-context                     |     100 |      100 |     100 |     100 |                       
  wait-for-callback-child-context.ts                              |     100 |      100 |     100 |     100 |                       
 src/examples/wait-for-callback/failing-submitter                 |   27.27 |        0 |       0 |      30 |                       
  wait-for-callback-failing-submitter.ts                          |   27.27 |        0 |       0 |      30 | 15-37                 
 src/examples/wait-for-callback/failures                          |      90 |       50 |     100 |   88.88 |                       
  wait-for-callback-failures.ts                                   |      90 |       50 |     100 |   88.88 | 24                    
 src/examples/wait-for-callback/heartbeat-sends                   |     100 |       50 |     100 |     100 |                       
  wait-for-callback-heartbeat-sends.ts                            |     100 |       50 |     100 |     100 | 24-29                 
 src/examples/wait-for-callback/mixed-ops                         |     100 |      100 |     100 |     100 |                       
  wait-for-callback-mixed-ops.ts                                  |     100 |      100 |     100 |     100 |                       
 src/examples/wait-for-callback/multiple-invocations              |     100 |      100 |     100 |     100 |                       
  wait-for-callback-multiple-invocations.ts                       |     100 |      100 |     100 |     100 |                       
 src/examples/wait-for-callback/nested                            |     100 |      100 |     100 |     100 |                       
  wait-for-callback-nested.ts                                     |     100 |      100 |     100 |     100 |                       
 src/examples/wait-for-callback/serdes                            |   71.42 |       25 |      75 |   83.33 |                       
  wait-for-callback-serdes.ts                                     |   71.42 |       25 |      75 |   83.33 | 27-28                 
 src/examples/wait-for-callback/submitter-failure-catchable       |    90.9 |       50 |     100 |      90 |                       
  wait-for-callback-submitter-failure-catchable.ts                |    90.9 |       50 |     100 |      90 | 32                    
 src/examples/wait-for-callback/submitter-retry-success           |     100 |       75 |     100 |     100 |                       
  wait-for-callback-submitter-retry-success.ts                    |     100 |       75 |     100 |     100 | 15                    
 src/examples/wait-for-callback/timeout                           |    87.5 |       50 |     100 |    87.5 |                       
  wait-for-callback-timeout.ts                                    |    87.5 |       50 |     100 |    87.5 | 25                    
 src/examples/wait-for-condition                                  |     100 |      100 |     100 |     100 |                       
  wait-for-condition.ts                                           |     100 |      100 |     100 |     100 |                       
 src/examples/wait/basic                                          |     100 |      100 |     100 |     100 |                       
  wait.ts                                                         |     100 |      100 |     100 |     100 |                       
 src/examples/wait/named                                          |     100 |      100 |     100 |     100 |                       
  wait-named.ts                                                   |     100 |      100 |     100 |     100 |                       
 src/utils                                                        |      52 |     37.5 |   71.42 |   47.82 |                       
  test-helper.ts                                                  |      52 |     37.5 |   71.42 |   47.82 | 31-62                 
------------------------------------------------------------------|---------|----------|---------|---------|-----------------------

Summary of all failing tests
FAIL src/examples/promise/unhandled-rejection/promise-unhandled-rejection.test.ts (7.209 s)
  ● promise-unhandled-rejection (local) › should complete successfully despite failing steps in promise combinators

    StepError: Step 4 failed

      64 |         );
      65 |       default:
    > 66 |         return new StepError(
         |                ^
      67 |           errorObject.ErrorMessage || "Unknown error",
      68 |           cause,
      69 |           errorObject.ErrorData,

      at Function.fromErrorObject (../aws-durable-execution-sdk-js/src/errors/durable-error/durable-error.ts:66:16)
      at fromErrorObject (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:502:35)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24

    Cause:



  ● promise-unhandled-rejection (local) › should complete successfully despite failing steps in promise combinators

    StepError: Step 5 failed

      64 |         );
      65 |       default:
    > 66 |         return new StepError(
         |                ^
      67 |           errorObject.ErrorMessage || "Unknown error",
      68 |           cause,
      69 |           errorObject.ErrorData,

      at Function.fromErrorObject (../aws-durable-execution-sdk-js/src/errors/durable-error/durable-error.ts:66:16)
      at fromErrorObject (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:502:35)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24

    Cause:



  ● promise-unhandled-rejection (local) › should complete successfully despite failing steps in promise combinators

    StepError: Step 6 failed

      64 |         );
      65 |       default:
    > 66 |         return new StepError(
         |                ^
      67 |           errorObject.ErrorMessage || "Unknown error",
      68 |           cause,
      69 |           errorObject.ErrorData,

      at Function.fromErrorObject (../aws-durable-execution-sdk-js/src/errors/durable-error/durable-error.ts:66:16)
      at fromErrorObject (../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:502:35)
      at ../aws-durable-execution-sdk-js/src/handlers/step-handler/step-handler.ts:265:24

    Cause:




Test Suites: 1 failed, 1 skipped, 62 passed, 63 of 64 total
Tests:       1 failed, 1 skipped, 94 passed, 96 total
Snapshots:   0 total
Time:        14.717 s, estimated 18 s
Ran all test suites.
npm verbose stack Error: command failed
npm verbose stack     at promiseSpawn (/Users/parpooya/.nvm/versions/node/v20.19.5/lib/node_modules/npm/node_modules/@npmcli/promise-spawn/lib/index.js:22:22)
npm verbose stack     at spawnWithShell (/Users/parpooya/.nvm/versions/node/v20.19.5/lib/node_modules/npm/node_modules/@npmcli/promise-spawn/lib/index.js:124:10)
npm verbose stack     at promiseSpawn (/Users/parpooya/.nvm/versions/node/v20.19.5/lib/node_modules/npm/node_modules/@npmcli/promise-spawn/lib/index.js:12:12)
npm verbose stack     at runScriptPkg (/Users/parpooya/.nvm/versions/node/v20.19.5/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/run-script-pkg.js:77:13)
npm verbose stack     at runScript (/Users/parpooya/.nvm/versions/node/v20.19.5/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/run-script.js:9:12)
npm verbose stack     at #run (/Users/parpooya/.nvm/versions/node/v20.19.5/lib/node_modules/npm/lib/commands/run-script.js:130:13)
npm verbose stack     at RunScript.execWorkspaces (/Users/parpooya/.nvm/versions/node/v20.19.5/lib/node_modules/npm/lib/commands/run-script.js:62:24)
npm verbose stack     at async Npm.exec (/Users/parpooya/.nvm/versions/node/v20.19.5/lib/node_modules/npm/lib/npm.js:207:9)
npm verbose stack     at async module.exports (/Users/parpooya/.nvm/versions/node/v20.19.5/lib/node_modules/npm/lib/cli/entry.js:74:5)
npm verbose pkgid @aws/durable-execution-sdk-js-examples@0.1.0
npm error Lifecycle script `unit-test` failed with error:
npm error code 1
npm error path /Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples
npm error workspace @aws/durable-execution-sdk-js-examples@0.1.0
npm error location /Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples
npm error command failed
npm error command sh -c jest --collectCoverage
npm verbose cwd /Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples
npm verbose os Darwin 24.6.0
npm verbose node v20.19.5
npm verbose npm  v10.8.2
npm verbose exit 1
npm verbose code 1
npm error Lifecycle script `test` failed with error:
npm error code 1
npm error path /Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples
npm error workspace @aws/durable-execution-sdk-js-examples@0.1.0
npm error location /Users/parpooya/workplace/aws-durable-execution-sdk-js-branch/packages/aws-durable-execution-sdk-js-examples
npm error command failed
npm error command sh -c npm run unit-test --testPathPattern=hello-world --verbose
